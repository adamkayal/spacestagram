(this.webpackJsonpspacestagram=this.webpackJsonpspacestagram||[]).push([[0],{103:function(t,e,a){},104:function(t,e,a){},105:function(t,e,a){},130:function(t,e,a){},158:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a(12),s=a.n(c),o=(a(103),a(89)),i=a(16),r=(a(104),a(88)),l=a(62),d=a.n(l),p=(a(105),a(4));var u=function(t){var e=t.idx,a=t.copyright,c=void 0===a?"NASA":a,s=t.date,o=t.explanation,l=t.media_type,u=t.hdurl,j=t.thumbnail_url,b=t.url,m=t.title,O=t.user,h=t.setOpenLogIn,g=t.setOpenShare,f=t.setPostUrl,x=Object(n.useState)(!1),_=Object(i.a)(x,2),v=_[0],y=_[1],C=Object(n.useState)(""),N=Object(i.a)(C,2),S=N[0],k=N[1],I=Object(n.useState)([]),P=Object(i.a)(I,2),U=P[0],w=P[1];Object(n.useEffect)((function(){O||y(!1)}),[O]);var D=function(){O?(y(!v),d()("#overlay_".concat(e)).fadeIn(400,(function(){d()("#overlay_".concat(e)).fadeOut(400)}))):h(!0)};return Object(p.jsxs)("div",{className:"post",children:[Object(p.jsx)("h2",{className:"post__title","data-testid":"title",children:m}),Object(p.jsxs)("div",{className:"post__imageContainer",children:["video"===l?Object(p.jsx)("iframe",{className:"post__video",src:u||b,title:m,"data-testid":"postVideo"}):Object(p.jsx)("img",{className:"post__image",src:j||u||b||"/no_image_available.jpg",alt:m,title:m,onDoubleClick:D,"data-testid":"postImage"}),Object(p.jsx)("img",{id:"overlay_".concat(e),className:"post__imageOverlay",src:"/heart_icon.png",alt:"Heart"})]}),Object(p.jsxs)("div",{className:"post__tools",children:[Object(p.jsx)("img",{className:"post__icon",src:v&&O?"/heart_icon_liked.png":"/heart_icon_unliked.png",alt:"Like",title:"Like",onClick:D,"data-testid":"likeBtn"}),Object(p.jsx)("img",{className:"post__icon",src:"/comment_icon.png",alt:"Comment",title:"Comment",onClick:function(){O?document.getElementById("input_".concat(e)).focus():h(!0)},"data-testid":"commentBtn"}),Object(p.jsx)("img",{className:"post__icon",src:"/share_icon.png",alt:"Share",title:"Share",onClick:function(){f(j||u||b),g(!0)}})]}),Object(p.jsxs)("p",{className:"post__text","data-testid":"postText",children:[Object(p.jsx)("strong",{children:c}),": ",o]}),Object(p.jsx)("p",{className:"post__date",children:s}),Object(p.jsx)("div",{"data-testid":"postComments",children:(U||[]).map((function(t,e){return Object(p.jsxs)("p",{className:"post__comment",children:[Object(p.jsx)("strong",{children:t.email})," ",t.text]},"comment_".concat(e))}))}),Object(p.jsxs)("form",{className:"post__commentBox",children:[Object(p.jsx)("input",{id:"input_".concat(e),className:"post__input",type:"text",placeholder:"Add a comment...",value:S,onChange:function(t){return k(t.target.value)},"data-testid":"commentInput"}),Object(p.jsx)("button",{className:"post__button",disabled:!S,type:"submit",onClick:function(t){t.preventDefault(),O?(w([].concat(Object(r.a)(U),[{email:O.email,text:S}])),k("")):h(!0)},"data-testid":"commentPostBtn",children:"Post"})]})]})},j=a(8);a(107),a(108),a(109);j.b.initializeApp({apiKey:"AIzaSyBZk_jO9tqniRpB6AbPb5lhYeisY6-Nb74",authDomain:"adamkayal-spacestagram.firebaseapp.com",projectId:"adamkayal-spacestagram",storageBucket:"adamkayal-spacestagram.appspot.com",messagingSenderId:"859658276215",appId:"1:859658276215:web:6276119e314a7d61582572",measurementId:"G-DTJGBGWV2K"});j.b.firestore();var b=j.b.auth(),m=(j.b.storage(),a(63)),O=a.n(m),h=a(78),g=a.n(h),f=a(197),x=a(195),_=a(194),v=a(196),y=a(188),C=a(190),N=(a(130),a(64)),S=a(192);function k(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var I=function(t){var e=t.open,a=t.setOpen,c=t.onClick,s=t.buttonText,o=t.isUserForm,r=t.postUrl,l=t.setOpenSignUp,d=t.theme,u=Object(n.useState)(k),j=Object(i.a)(u,1)[0],b=Object(n.useState)(""),m=Object(i.a)(b,2),O=m[0],h=m[1],g=Object(n.useState)(""),f=Object(i.a)(g,2),_=f[0],I=f[1],P="Copy to clipboard"===s?"Copy the post link to share it":"Log in or sign up to like and comment on posts";return Object(p.jsx)(v.a,{open:e,onClose:function(){return a(!1)},"aria-labelledby":s,"aria-describedby":P,"data-testid":"modal",children:Object(p.jsx)(y.a,{in:e,children:Object(p.jsxs)("form",{style:j,className:"modalContainer__paper",children:[Object(p.jsx)("div",{className:"modalContainer__message",children:P}),Object(p.jsxs)("div",{className:"modalContainer__signup",children:[Object(p.jsx)("center",{children:Object(p.jsx)("img",{className:"modalContainer__headerImage",src:"/logo.png",alt:"spacetagram logo","data-testid":"logo"})}),o?Object(p.jsxs)("div",{className:"modalContainer__signup",children:[Object(p.jsx)(C.a,{type:"email",placeholder:"email",value:O,onChange:function(t){return h(t.target.value)},autoFocus:!0,error:!Object(N.validate)(O),required:!0,"data-testid":"emailInput"}),Object(p.jsx)(C.a,{type:"password",placeholder:"password",value:_,onChange:function(t){return I(t.target.value)},error:_.length<6,required:!0,"data-testid":"passwordInput"})]}):Object(p.jsx)(C.a,{type:"text",value:r,disabled:!0,"data-testid":"copyInput"}),Object(p.jsx)(S.a,{theme:d,children:Object(p.jsx)(x.a,{className:"modalContainer__button",type:o?"submit":null,disabled:o&&(!Object(N.validate)(O)||_.length<6),onClick:function(t){return c(t,O,_)},variant:"contained",color:"primary",children:s})}),"Log In"===s&&Object(p.jsxs)("div",{className:"modalContainer__signUpOfferText","data-testid":"signUpOffer",children:["Don't have an account?",Object(p.jsx)("button",{className:"modalContainer__buttonLink",onClick:function(t){t.preventDefault(),a(!1),l(!0)},children:"Sign up"})]})]})]})})})},P=a(84),U=a.n(P),w=a(86),D=a.n(w),L=a(87),A=a(9),B=Object(L.a)({palette:{primary:{main:"#0095f6"}}});var T=function(){var t=Object(n.useState)([]),e=Object(i.a)(t,2),a=e[0],c=e[1],s=Object(n.useState)(!1),r=Object(i.a)(s,2),l=r[0],d=r[1],j=Object(n.useState)(!1),m=Object(i.a)(j,2),h=m[0],v=m[1],y=Object(n.useState)(!1),C=Object(i.a)(y,2),N=C[0],k=C[1],P=Object(n.useState)(""),w=Object(i.a)(P,2),L=w[0],T=w[1],E=Object(n.useState)(null),F=Object(i.a)(E,2),q=F[0],W=F[1],z=Object(n.useState)(!1),G=Object(i.a)(z,2),J=G[0],K=G[1],V=Object(n.useState)(""),Y=Object(i.a)(V,2),R=Y[0],Z=Y[1],H=Object(n.useState)(""),M=Object(i.a)(H,2),Q=M[0],X=M[1];g()(O.a,{retries:3,retryCondition:function(t){return 500===t.response.status}}),Object(n.useEffect)((function(){var t=b.onAuthStateChanged((function(t){W(t||null)}));return function(){return t()}}),[q]),Object(n.useEffect)((function(){return $()}),[]);var $=function(t){t&&t.preventDefault();var e="count=3";R&&(e="start_date=".concat(R),Q&&(e=e.concat("&end_date=".concat(Q)))),K(!0),O.a.get("https://api.nasa.gov/planetary/apod?api_key=ESNnOstvfNx2gncbFYQtbjIZDCaLKqbg5PM0Xo83&".concat(e)).then((function(t){K(!1),c(t.data)})).catch((function(t){alert("API call failed after 3 retry attempts. Please try again."),console.error(t),K(!1)}))},tt=function(){return(new Date).toISOString().slice(0,10)},et=Object(A.a)((function(t){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(16),border:"1px solid #dadde9",textAlign:"justify"}}}))(f.a);return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(I,{open:l,setOpen:d,onClick:function(t,e,a){t.preventDefault(),b.createUserWithEmailAndPassword(e,a).then((function(){return d(!1)})).catch((function(t){return alert(t.message)}))},buttonText:"Sign Up",isUserForm:!0,theme:B}),Object(p.jsx)(I,{open:h,setOpen:v,onClick:function(t,e,a){t.preventDefault(),b.signInWithEmailAndPassword(e,a).then((function(t){t.user.updateProfile({displayName:e}),v(!1)})).catch((function(t){return alert(t.message)}))},buttonText:"Log In",isUserForm:!0,setOpenSignUp:d,theme:B}),Object(p.jsx)(I,{open:N,setOpen:k,onClick:function(t){t.preventDefault(),navigator.clipboard.writeText(L),k(!1)},buttonText:"Copy to clipboard",isUserForm:!1,postUrl:L,theme:B}),Object(p.jsxs)("div",{className:"app__header",children:[Object(p.jsx)("img",{className:"app__headerImage",src:"/logo.png",alt:"spacetagram logo","data-testid":"logo"}),q?Object(p.jsx)(S.a,{theme:B,children:Object(p.jsx)(x.a,{onClick:function(){return b.signOut()},variant:"contained",color:"primary",children:"Logout"})}):Object(p.jsxs)("div",{className:"app__authButtons",children:[Object(p.jsx)(S.a,{theme:B,children:Object(p.jsx)(x.a,{onClick:function(){return v(!0)},variant:"contained",color:"primary",children:"Log In"})}),Object(p.jsx)(S.a,{theme:B,children:Object(p.jsx)(x.a,{onClick:function(){return d(!0)},variant:"contained",color:"primary",children:"Sign Up"})})]})]}),Object(p.jsxs)("form",{className:"app__search",noValidate:!0,children:[Object(p.jsxs)("div",{className:"app__dateTitle",children:[Object(p.jsx)(et,{title:"If no dates are selected, 3 random posts will be shown. If only a start date is selected, the end date will by default be today's date.",children:Object(p.jsx)(D.a,{className:"app__infoIcon","aria-label":"info"})}),Object(p.jsx)("p",{children:Object(p.jsx)("strong",{children:"Select dates for search (optional):"})})]}),Object(p.jsx)(_.a,{id:"start-date","data-testid":"startDate",label:"Start date",type:"date",InputLabelProps:{shrink:!0},InputProps:{inputProps:{max:tt()}},value:R,onChange:function(t){return Z(t.target.value)}}),Object(p.jsx)(_.a,{id:"end-date","data-testid":"endDate",label:"End date",type:"date",InputLabelProps:{shrink:!0},InputProps:{inputProps:{min:R,max:tt()}},value:Q,onChange:function(t){return X(t.target.value)},disabled:!R}),Object(p.jsx)(S.a,{theme:B,children:Object(p.jsx)(x.a,{type:"submit",onClick:function(t){return $(t)},variant:"contained",color:"primary",children:"Search"})})]}),Object(p.jsxs)("div",{className:"app__posts",children:[Object(p.jsx)(U.a,{type:"Circles",color:"#0095f6",height:200,width:200,visible:J,className:"app__loader"}),!J&&(a||[]).map((function(t,e){return Object(p.jsx)(u,Object(o.a)({idx:e,user:q,setOpenLogIn:v,setOpenShare:k,setPostUrl:T},t),e)}))]})]})};s.a.render(Object(p.jsx)(T,{}),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.77a4668a.chunk.js.map