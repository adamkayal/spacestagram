(this.webpackJsonpspacestagram=this.webpackJsonpspacestagram||[]).push([[0],{100:function(t,e,a){},101:function(t,e,a){},102:function(t,e,a){},127:function(t,e,a){},155:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a(12),s=a.n(c),o=(a(100),a(86)),i=a(16),r=(a(101),a(85)),l=a(60),d=a.n(l),p=(a(102),a(4));var u=function(t){var e=t.idx,a=t.copyright,c=void 0===a?"NASA":a,s=t.date,o=t.explanation,l=t.media_type,u=t.hdurl,j=t.thumbnail_url,b=t.url,m=t.title,O=t.user,h=t.setOpenLogIn,g=t.setOpenShare,f=t.setPostUrl,_=Object(n.useState)(!1),x=Object(i.a)(_,2),v=x[0],y=x[1],C=Object(n.useState)(""),N=Object(i.a)(C,2),S=N[0],k=N[1],I=Object(n.useState)([]),P=Object(i.a)(I,2),w=P[0],L=P[1];Object(n.useEffect)((function(){O||y(!1)}),[O]);var D=function(){O?(y(!v),d()("#overlay_".concat(e)).fadeIn(400,(function(){d()("#overlay_".concat(e)).fadeOut(400)}))):h(!0)};return Object(p.jsxs)("div",{className:"post",children:[Object(p.jsx)("h2",{className:"post__title","data-testid":"title",children:m}),Object(p.jsxs)("div",{className:"post__imageContainer",children:["video"===l?Object(p.jsx)("iframe",{className:"post__video",src:u||b||"/no_video_available.mp4",title:m}):Object(p.jsx)("img",{className:"post__image",src:j||u||b||"/no_image_available.jpg",alt:m,title:m,onDoubleClick:D,"data-testid":"postImage"}),Object(p.jsx)("img",{id:"overlay_".concat(e),className:"post__imageOverlay",src:"/heart_icon.png",alt:"Heart"})]}),Object(p.jsxs)("div",{className:"post__tools",children:[Object(p.jsx)("img",{className:"post__icon",src:v&&O?"/heart_icon_liked.png":"/heart_icon_unliked.png",alt:"Like",title:"Like",onClick:D,"data-testid":"likeBtn"}),Object(p.jsx)("img",{className:"post__icon",src:"/comment_icon.png",alt:"Comment",title:"Comment",onClick:function(){O?document.getElementById("input_".concat(e)).focus():h(!0)},"data-testid":"commentBtn"}),Object(p.jsx)("img",{className:"post__icon",src:"/share_icon.png",alt:"Share",title:"Share",onClick:function(){f(j||u||b),g(!0)}})]}),Object(p.jsxs)("p",{className:"post__text","data-testid":"postText",children:[Object(p.jsx)("strong",{children:c}),": ",o]}),Object(p.jsx)("p",{className:"post__date",children:s}),Object(p.jsx)("div",{"data-testid":"postComments",children:w.map((function(t,e){return Object(p.jsxs)("p",{className:"post__comment",children:[Object(p.jsx)("strong",{children:t.email})," ",t.text]},"comment_".concat(e))}))}),Object(p.jsxs)("form",{className:"post__commentBox",children:[Object(p.jsx)("input",{id:"input_".concat(e),className:"post__input",type:"text",placeholder:"Add a comment...",value:S,onChange:function(t){return k(t.target.value)},"data-testid":"commentInput"}),Object(p.jsx)("button",{className:"post__button",disabled:!S,type:"submit",onClick:function(t){t.preventDefault(),O?(L([].concat(Object(r.a)(w),[{email:O.email,text:S}])),k("")):h(!0)},"data-testid":"commentPostBtn",children:"Post"})]})]})},j=a(8);a(104),a(105),a(106);j.b.initializeApp({apiKey:"AIzaSyBZk_jO9tqniRpB6AbPb5lhYeisY6-Nb74",authDomain:"adamkayal-spacestagram.firebaseapp.com",projectId:"adamkayal-spacestagram",storageBucket:"adamkayal-spacestagram.appspot.com",messagingSenderId:"859658276215",appId:"1:859658276215:web:6276119e314a7d61582572",measurementId:"G-DTJGBGWV2K"});j.b.firestore();var b=j.b.auth(),m=(j.b.storage(),a(61)),O=a.n(m),h=a(75),g=a.n(h),f=a(193),_=a(190),x=a(189),v=a(191),y=a(185),C=(a(127),a(62)),N=a(188);function S(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var k=function(t){var e=t.open,a=t.setOpen,c=t.onClick,s=t.buttonText,o=t.postUrl,r=t.setOpenSignUp,l=t.theme,d=Object(n.useState)(S),u=Object(i.a)(d,1)[0],j=Object(n.useState)(""),b=Object(i.a)(j,2),m=b[0],O=b[1],h=Object(n.useState)(""),g=Object(i.a)(h,2),f=g[0],x=g[1];return Object(p.jsx)(v.a,{open:e,onClose:function(){return a(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description","data-testid":"modal",children:Object(p.jsxs)("form",{style:u,className:"modalContainer__paper",children:["Log In"===s&&Object(p.jsx)("div",{className:"modalContainer__message",children:"Log in to like and comment on posts"}),Object(p.jsxs)("div",{className:"modalContainer__signup",children:[Object(p.jsx)("center",{children:Object(p.jsx)("img",{className:"modalContainer__headerImage",src:"/logo.png",alt:"spacetagram logo","data-testid":"logo"})}),"Copy to clipboard"===s?Object(p.jsx)(y.a,{type:"text",value:o,disabled:!0,"data-testid":"copyInput"}):Object(p.jsxs)("div",{className:"modalContainer__signup",children:[Object(p.jsx)(y.a,{type:"email",placeholder:"email",value:m,onChange:function(t){return O(t.target.value)},autoFocus:!0,error:!Object(C.validate)(m),required:!0,"data-testid":"emailInput",s:!0}),Object(p.jsx)(y.a,{type:"password",placeholder:"password",value:f,onChange:function(t){return x(t.target.value)},error:f.length<6,required:!0,"data-testid":"passwordInput"})]}),Object(p.jsx)(N.a,{theme:l,children:Object(p.jsx)(_.a,{className:"modalContainer__button",type:"Copy to clipboard"!==s?"submit":null,disabled:"Copy to clipboard"!==s&&(!Object(C.validate)(m)||f.length<6),onClick:function(t){return c(t,m,f)},variant:"contained",color:"primary",children:s})}),"Log In"===s&&Object(p.jsxs)("div",{className:"modalContainer__signUpOfferText","data-testid":"signUpOffer",children:["Don't have an account?",Object(p.jsx)("button",{className:"modalContainer__buttonLink",onClick:function(){a(!1),r(!0)},children:"Sign up"})]})]})]})})},I=a(81),P=a.n(I),w=a(83),L=a.n(w),D=a(84),A=a(9),B=Object(D.a)({palette:{primary:{main:"#0095f6"}}});var U=function(){var t=Object(n.useState)([]),e=Object(i.a)(t,2),a=e[0],c=e[1],s=Object(n.useState)(!1),r=Object(i.a)(s,2),l=r[0],d=r[1],j=Object(n.useState)(!1),m=Object(i.a)(j,2),h=m[0],v=m[1],y=Object(n.useState)(!1),C=Object(i.a)(y,2),S=C[0],I=C[1],w=Object(n.useState)(""),D=Object(i.a)(w,2),U=D[0],T=D[1],E=Object(n.useState)(null),q=Object(i.a)(E,2),W=q[0],z=q[1],G=Object(n.useState)(!1),J=Object(i.a)(G,2),K=J[0],Y=J[1],F=Object(n.useState)(""),R=Object(i.a)(F,2),V=R[0],Z=R[1],H=Object(n.useState)(""),M=Object(i.a)(H,2),Q=M[0],X=M[1];g()(O.a,{retries:3,retryCondition:function(t){return 500===t.response.status}}),Object(n.useEffect)((function(){var t=b.onAuthStateChanged((function(t){z(t||null)}));return function(){return t()}}),[W]),Object(n.useEffect)((function(){return $()}),[]);var $=function(t){t&&t.preventDefault();var e="count=3";V&&(e="start_date=".concat(V),Q&&(e=e.concat("&end_date=".concat(Q)))),Y(!0),O.a.get("https://api.nasa.gov/planetary/apod?api_key=ESNnOstvfNx2gncbFYQtbjIZDCaLKqbg5PM0Xo83&".concat(e)).then((function(t){Y(!1),c(t.data)})).catch((function(t){alert("API call failed after 3 retry attempts. Please try again."),console.error(t),Y(!1)}))},tt=function(){return(new Date).toISOString().slice(0,10)},et=Object(A.a)((function(t){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(16),border:"1px solid #dadde9",textAlign:"justify"}}}))(f.a);return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(k,{open:l,setOpen:d,onClick:function(t,e,a){t.preventDefault(),b.createUserWithEmailAndPassword(e,a).then((function(){return d(!1)})).catch((function(t){return alert(t.message)}))},buttonText:"Sign Up",theme:B}),Object(p.jsx)(k,{open:h,setOpen:v,onClick:function(t,e,a){t.preventDefault(),b.signInWithEmailAndPassword(e,a).then((function(t){t.user.updateProfile({displayName:e}),v(!1)})).catch((function(t){return alert(t.message)}))},buttonText:"Log In",setOpenSignUp:d,theme:B}),Object(p.jsx)(k,{open:S,setOpen:I,onClick:function(t){t.preventDefault(),navigator.clipboard.writeText(U),I(!1)},buttonText:"Copy to clipboard",postUrl:U,theme:B}),Object(p.jsxs)("div",{className:"app__header",children:[Object(p.jsx)("img",{className:"app__headerImage",src:"/logo.png",alt:"spacetagram logo","data-testid":"logo"}),W?Object(p.jsx)(N.a,{theme:B,children:Object(p.jsx)(_.a,{onClick:function(){return b.signOut()},variant:"contained",color:"primary",children:"Logout"})}):Object(p.jsxs)("div",{className:"app__authButtons",children:[Object(p.jsx)(N.a,{theme:B,children:Object(p.jsx)(_.a,{onClick:function(){return v(!0)},variant:"contained",color:"primary",children:"Log In"})}),Object(p.jsx)(N.a,{theme:B,children:Object(p.jsx)(_.a,{onClick:function(){return d(!0)},variant:"contained",color:"primary",children:"Sign Up"})})]})]}),Object(p.jsxs)("form",{className:"app__search",noValidate:!0,children:[Object(p.jsxs)("div",{className:"app__dateTitle",children:[Object(p.jsx)(et,{title:"If no dates are selected, 3 random posts will be shown. If only a start date is selected, the end date will by default be today's date.",children:Object(p.jsx)(L.a,{className:"app__infoIcon","aria-label":"info"})}),Object(p.jsx)("p",{children:Object(p.jsx)("strong",{children:"Select dates for search (optional):"})})]}),Object(p.jsx)(x.a,{id:"start-date","data-testid":"startDate",label:"Start date",type:"date",InputLabelProps:{shrink:!0},InputProps:{inputProps:{max:tt()}},value:V,onChange:function(t){return Z(t.target.value)}}),Object(p.jsx)(x.a,{id:"end-date","data-testid":"endDate",label:"End date",type:"date",InputLabelProps:{shrink:!0},InputProps:{inputProps:{min:V,max:tt()}},value:Q,onChange:function(t){return X(t.target.value)},disabled:!V}),Object(p.jsx)(N.a,{theme:B,children:Object(p.jsx)(_.a,{type:"submit",onClick:function(t){return $(t)},variant:"contained",color:"primary",children:"Search"})})]}),Object(p.jsxs)("div",{className:"app__posts",children:[Object(p.jsx)(P.a,{type:"Circles",color:"#0095f6",height:200,width:200,visible:K,className:"app__loader"}),!K&&a.map((function(t,e){return Object(p.jsx)(u,Object(o.a)({idx:e,user:W,setOpenLogIn:v,setOpenShare:I,setPostUrl:T},t),e)}))]})]})};s.a.render(Object(p.jsx)(U,{}),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.f4a2e21b.chunk.js.map