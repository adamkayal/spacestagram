(this.webpackJsonpspacestagram=this.webpackJsonpspacestagram||[]).push([[0],{121:function(t,e,a){},149:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a(12),c=a.n(s),o=(a(94),a(81)),i=a(16),r=(a(95),a(80)),l=a(58),d=a.n(l),p=(a(96),a(4));var u=function(t){var e=t.idx,a=t.copyright,s=void 0===a?"NASA":a,c=t.date,o=t.explanation,l=t.hdurl,u=t.thumbnail_url,j=t.url,b=t.title,m=t.user,O=t.setOpenLogIn,g=t.setOpenShare,h=t.setPostUrl,f=Object(n.useState)(!1),_=Object(i.a)(f,2),x=_[0],v=_[1],y=Object(n.useState)(""),C=Object(i.a)(y,2),N=C[0],S=C[1],k=Object(n.useState)([]),I=Object(i.a)(k,2),P=I[0],w=I[1];Object(n.useEffect)((function(){m||v(!1)}),[m]);var L=function(){m?(v(!x),d()("#overlay_".concat(e)).fadeIn(400,(function(){d()("#overlay_".concat(e)).fadeOut(400)}))):O(!0)};return Object(p.jsxs)("div",{className:"post",children:[Object(p.jsx)("p",{className:"post__title","data-testid":"title",children:b}),Object(p.jsxs)("div",{className:"post__imageContainer",children:[Object(p.jsx)("img",{className:"post__image",src:u||l||j||"/no_image_available.jpg",alt:b,title:b,onDoubleClick:L,"data-testid":"postImage"}),Object(p.jsx)("img",{id:"overlay_".concat(e),className:"post__imageOverlay",src:"/heart_icon.png",alt:"Heart"})]}),Object(p.jsxs)("div",{className:"post__tools",children:[Object(p.jsx)("img",{className:"post__icon",src:x&&m?"/heart_icon_liked.png":"/heart_icon_unliked.png",alt:"Like",title:"Like",onClick:L,"data-testid":"likeBtn"}),Object(p.jsx)("img",{className:"post__icon",src:"/comment_icon.png",alt:"Comment",title:"Comment",onClick:function(){m?document.getElementById("input_".concat(e)).focus():O(!0)},"data-testid":"commentBtn"}),Object(p.jsx)("img",{className:"post__icon",src:"/share_icon.png",alt:"Share",title:"Share",onClick:function(){h(u||l||j),g(!0)}})]}),Object(p.jsxs)("p",{className:"post__text","data-testid":"postText",children:[Object(p.jsx)("strong",{children:s}),": ",o]}),Object(p.jsx)("p",{className:"post__date",children:c}),Object(p.jsx)("div",{"data-testid":"postComments",children:P.map((function(t,e){return Object(p.jsxs)("p",{className:"post__comment",children:[Object(p.jsx)("strong",{children:t.email})," ",t.text]},"comment_".concat(e))}))}),Object(p.jsxs)("form",{className:"post__commentBox",children:[Object(p.jsx)("input",{id:"input_".concat(e),className:"post__input",type:"text",placeholder:"Add a comment...",value:N,onChange:function(t){return S(t.target.value)},"data-testid":"commentInput"}),Object(p.jsx)("button",{className:"post__button",disabled:!N,type:"submit",onClick:function(t){t.preventDefault(),m?(w([].concat(Object(r.a)(P),[{email:m.email,text:N}])),S("")):O(!0)},"data-testid":"commentPostBtn",children:"Post"})]})]})},j=a(8);a(98),a(99),a(100);j.b.initializeApp({apiKey:"AIzaSyBZk_jO9tqniRpB6AbPb5lhYeisY6-Nb74",authDomain:"adamkayal-spacestagram.firebaseapp.com",projectId:"adamkayal-spacestagram",storageBucket:"adamkayal-spacestagram.appspot.com",messagingSenderId:"859658276215",appId:"1:859658276215:web:6276119e314a7d61582572",measurementId:"G-DTJGBGWV2K"});j.b.firestore();var b=j.b.auth(),m=(j.b.storage(),a(59)),O=a.n(m),g=a(71),h=a.n(g),f=a(188),_=a(185),x=a(184),v=a(186),y=a(181);a(121);function C(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var N=function(t){var e=t.open,a=t.setOpen,s=t.onClick,c=t.buttonText,o=t.postUrl,r=t.setOpenSignUp,l=Object(n.useState)(C),d=Object(i.a)(l,1)[0],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],m=j[1],O=Object(n.useState)(""),g=Object(i.a)(O,2),h=g[0],f=g[1];return Object(p.jsx)(v.a,{open:e,onClose:function(){return a(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description","data-testid":"modal",children:Object(p.jsxs)("form",{style:d,className:"modalContainer__paper",children:["Log In"===c&&Object(p.jsx)("div",{className:"modalContainer__message",children:"Log in to like and comment on posts"}),Object(p.jsxs)("div",{className:"modalContainer__signup",children:[Object(p.jsx)("center",{children:Object(p.jsx)("img",{className:"modalContainer__headerImage",src:"/logo.png",alt:"spacetagram logo","data-testid":"logo"})}),"Copy to clipboard"===c?Object(p.jsx)(y.a,{type:"text",value:o,disabled:!0,"data-testid":"copyInput"}):Object(p.jsxs)("div",{className:"modalContainer__signup",children:[Object(p.jsx)(y.a,{type:"email",placeholder:"email",value:b,onChange:function(t){return m(t.target.value)},autoFocus:!0,"data-testid":"emailInput"}),Object(p.jsx)(y.a,{type:"password",placeholder:"password",value:h,onChange:function(t){return f(t.target.value)},"data-testid":"passwordInput"})]}),Object(p.jsx)(_.a,{className:"modalContainer__button",type:"Copy to clipboard"!==c?"submit":null,onClick:function(t){return s(t,b,h)},children:c}),"Log In"===c&&Object(p.jsxs)("div",{className:"modalContainer__signUpOfferText","data-testid":"signUpOffer",children:["Don't have an account?",Object(p.jsx)("button",{className:"modalContainer__buttonLink",onClick:function(){a(!1),r(!0)},children:"Sign up"})]})]})]})})},S=a(77),k=a.n(S),I=a(79),P=a.n(I),w=a(9);var L=function(){var t=Object(n.useState)([]),e=Object(i.a)(t,2),a=e[0],s=e[1],c=Object(n.useState)(!1),r=Object(i.a)(c,2),l=r[0],d=r[1],j=Object(n.useState)(!1),m=Object(i.a)(j,2),g=m[0],v=m[1],y=Object(n.useState)(!1),C=Object(i.a)(y,2),S=C[0],I=C[1],L=Object(n.useState)(""),D=Object(i.a)(L,2),B=D[0],A=D[1],T=Object(n.useState)(null),U=Object(i.a)(T,2),E=U[0],F=U[1],W=Object(n.useState)(!1),z=Object(i.a)(W,2),G=z[0],J=z[1],K=Object(n.useState)(""),Y=Object(i.a)(K,2),q=Y[0],R=Y[1],V=Object(n.useState)(""),Z=Object(i.a)(V,2),H=Z[0],M=Z[1];h()(O.a,{retries:3}),Object(n.useEffect)((function(){var t=b.onAuthStateChanged((function(t){F(t||null)}));return function(){t()}}),[E]),Object(n.useEffect)((function(){return Q()}),[]);var Q=function(t){t&&t.preventDefault();var e="count=20";q&&(e="start_date=".concat(q),H&&(e=e.concat("&end_date=".concat(H)))),J(!0),O.a.get("https://api.nasa.gov/planetary/apod?api_key=ESNnOstvfNx2gncbFYQtbjIZDCaLKqbg5PM0Xo83&thumbs=True&".concat(e)).then((function(t){J(!1),s(t.data)})).catch((function(t){alert("API call failed after 3 retry attempts. Please try again."),console.error(t),J(!1)}))},X=function(){return(new Date).toISOString().slice(0,10)},$=Object(w.a)((function(t){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(16),border:"1px solid #dadde9",textAlign:"justify"}}}))(f.a);return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(N,{open:l,setOpen:d,onClick:function(t,e,a){t.preventDefault(),b.createUserWithEmailAndPassword(e,a).then((function(){return d(!1)})).catch((function(t){return alert(t.message)}))},buttonText:"Sign Up"}),Object(p.jsx)(N,{open:g,setOpen:v,onClick:function(t,e,a){t.preventDefault(),b.signInWithEmailAndPassword(e,a).then((function(t){t.user.updateProfile({displayName:e}),v(!1)})).catch((function(t){return alert(t.message)}))},buttonText:"Log In",setOpenSignUp:d}),Object(p.jsx)(N,{open:S,setOpen:I,onClick:function(t){t.preventDefault(),navigator.clipboard.writeText(B),I(!1)},buttonText:"Copy to clipboard",postUrl:B}),Object(p.jsxs)("div",{className:"app__header",children:[Object(p.jsx)("img",{className:"app__headerImage",src:"/logo.png",alt:"spacetagram logo","data-testid":"logo"}),E?Object(p.jsx)("div",{children:Object(p.jsx)(_.a,{onClick:function(){return b.signOut()},children:"Logout"})}):Object(p.jsxs)("div",{className:"app__authButtons",children:[Object(p.jsx)(_.a,{onClick:function(){return v(!0)},children:"Log In"}),Object(p.jsx)(_.a,{onClick:function(){return d(!0)},children:"Sign Up"})]})]}),Object(p.jsxs)("form",{className:"app__search",noValidate:!0,children:[Object(p.jsxs)("div",{className:"app__dateTitle",children:[Object(p.jsx)($,{title:"If no dates are selected, 20 random posts will be shown. If only a start date is selected, the end date will by default be today's date.",children:Object(p.jsx)(P.a,{className:"app__infoIcon","aria-label":"info"})}),Object(p.jsx)("p",{children:Object(p.jsx)("strong",{children:"Select dates for search (optional):"})})]}),Object(p.jsx)(x.a,{id:"start-date","data-testid":"startDate",label:"Start date",type:"date",InputLabelProps:{shrink:!0},InputProps:{inputProps:{max:X()}},value:q,onChange:function(t){return R(t.target.value)}}),Object(p.jsx)(x.a,{id:"end-date","data-testid":"endDate",label:"End date",type:"date",InputLabelProps:{shrink:!0},InputProps:{inputProps:{min:q,max:X()}},value:H,onChange:function(t){return M(t.target.value)},disabled:!q}),Object(p.jsx)(_.a,{type:"submit",onClick:function(t){return Q(t)},children:"Search"})]}),Object(p.jsxs)("div",{className:"app__posts",children:[Object(p.jsx)(k.a,{type:"Circles",color:"#00BFFF",height:200,width:200,visible:G,className:"app__loader"}),!G&&a.map((function(t,e){return Object(p.jsx)(u,Object(o.a)({idx:e,user:E,setOpenLogIn:v,setOpenShare:I,setPostUrl:A},t),e)}))]})]})};c.a.render(Object(p.jsx)(L,{}),document.getElementById("root"))},94:function(t,e,a){},95:function(t,e,a){},96:function(t,e,a){}},[[149,1,2]]]);
//# sourceMappingURL=main.81361407.chunk.js.map