{"version":3,"sources":["components/Post/Post.js","firebase/firebase.js","components/ModalContainer/ModalContainer.js","App.js","index.js"],"names":["Post","idx","copyright","date","explanation","media_type","hdurl","thumbnail_url","url","title","user","setOpenLogIn","setOpenShare","setPostUrl","useState","liked","setLiked","comment","setComment","comments","setComments","useEffect","addLike","$","fadeIn","fadeOut","className","src","alt","onDoubleClick","id","onClick","document","getElementById","focus","map","email","text","type","placeholder","value","onChange","e","target","disabled","event","preventDefault","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","storage","getModalStyle","top","left","transform","ModalContainer","open","setOpen","buttonText","postUrl","setOpenSignUp","theme","modalStyle","setEmail","password","setPassword","Modal","onClose","style","Input","autoFocus","error","validate","required","s","length","ThemeProvider","Button","variant","color","createTheme","palette","primary","main","App","posts","setPosts","openSignUp","openLogIn","openShare","setUser","showLoader","setShowLoader","startDate","setStartDate","endDate","setEndDate","axiosRetry","axios","retries","retryCondition","response","status","unsubscribe","onAuthStateChanged","authUser","search","queryString","concat","get","then","data","catch","alert","console","getTodayString","Date","toISOString","slice","HtmlTooltip","withStyles","tooltip","backgroundColor","maxWidth","fontSize","typography","pxToRem","border","textAlign","Tooltip","createUserWithEmailAndPassword","message","signInWithEmailAndPassword","updateProfile","displayName","navigator","clipboard","writeText","signOut","noValidate","TextField","label","InputLabelProps","shrink","InputProps","inputProps","max","min","height","width","visible","post","ReactDOM","render"],"mappings":"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","file":"static/js/main.f4a2e21b.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport $ from \"jquery\";\r\nimport \"./Post.css\";\r\n\r\nfunction Post({\r\n    idx,\r\n    copyright = \"NASA\",\r\n    date,\r\n    explanation,\r\n    media_type,\r\n    hdurl,\r\n    thumbnail_url,\r\n    url,\r\n    title,\r\n    user,\r\n    setOpenLogIn,\r\n    setOpenShare,\r\n    setPostUrl,\r\n}) {\r\n    Post.propTypes = {\r\n        idx: PropTypes.number.isRequired,\r\n        copyright: PropTypes.string,\r\n        date: PropTypes.string.isRequired,\r\n        explanation: PropTypes.string.isRequired,\r\n        media_type: PropTypes.string.isRequired,\r\n        thumbnail_url: PropTypes.string,\r\n        hdurl: PropTypes.string,\r\n        url: PropTypes.string,\r\n        title: PropTypes.string.isRequired,\r\n        user: PropTypes.any,\r\n        setOpenLogIn: PropTypes.func.isRequired,\r\n        setOpenShare: PropTypes.func.isRequired,\r\n        setPostUrl: PropTypes.func.isRequired,\r\n    };\r\n\r\n    const [liked, setLiked] = useState(false);\r\n    const [comment, setComment] = useState(\"\");\r\n    const [comments, setComments] = useState([]);\r\n\r\n    // we remove all likes if the user is not logged in\r\n    useEffect(() => {\r\n        if (!user) {\r\n            setLiked(false);\r\n        }\r\n    }, [user]);\r\n\r\n    // function that adds the like\r\n    const addLike = () => {\r\n        if (user) {\r\n            // if the user is logged in\r\n            // we toggle the like state\r\n            setLiked(!liked);\r\n\r\n            // heart animation\r\n            $(`#overlay_${idx}`).fadeIn(400, function () {\r\n                $(`#overlay_${idx}`).fadeOut(400);\r\n            });\r\n        } else {\r\n            // if the user is not logged in, we prompt him to log in\r\n            setOpenLogIn(true);\r\n        }\r\n    };\r\n\r\n    // function that opens the share dialog\r\n    const share = () => {\r\n        setPostUrl(thumbnail_url || hdurl || url);\r\n        setOpenShare(true);\r\n    };\r\n\r\n    // function that focuses the comment input if the user is logged in\r\n    const focusComment = () => {\r\n        if (user) {\r\n            // if the user is logged in, we focus the comment input\r\n            document.getElementById(`input_${idx}`).focus();\r\n        } else {\r\n            // if the user is not logged in, we prompt him to log in\r\n            setOpenLogIn(true);\r\n        }\r\n    };\r\n\r\n    // function that handles the addition of a comment\r\n    const postComment = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (user) {\r\n            // if the user is logged in, we add the new comment\r\n            setComments([\r\n                ...comments,\r\n                {\r\n                    email: user.email,\r\n                    text: comment,\r\n                },\r\n            ]);\r\n\r\n            // and clear the comment input\r\n            setComment(\"\");\r\n        } else {\r\n            // if the user is not logged in, we prompt him to log in\r\n            setOpenLogIn(true);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"post\">\r\n            <h2 className=\"post__title\" data-testid=\"title\">\r\n                {title}\r\n            </h2>\r\n\r\n            <div className=\"post__imageContainer\">\r\n                {media_type === \"video\" ? (\r\n                    <iframe\r\n                        className=\"post__video\"\r\n                        src={\r\n                            hdurl ||\r\n                            url ||\r\n                            \"/no_video_available.mp4\"\r\n                        }\r\n                        title={title}                     \r\n                    />\r\n                ) : (\r\n                    <img\r\n                        className=\"post__image\"\r\n                        src={\r\n                            thumbnail_url ||\r\n                            hdurl ||\r\n                            url ||\r\n                            \"/no_image_available.jpg\"\r\n                        }\r\n                        alt={title}\r\n                        title={title}\r\n                        onDoubleClick={addLike}\r\n                        data-testid=\"postImage\"\r\n                    />\r\n                )}\r\n                <img\r\n                    id={`overlay_${idx}`}\r\n                    className=\"post__imageOverlay\"\r\n                    src={\"/heart_icon.png\"}\r\n                    alt=\"Heart\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"post__tools\">\r\n                <img\r\n                    className=\"post__icon\"\r\n                    src={\r\n                        liked && user\r\n                            ? \"/heart_icon_liked.png\"\r\n                            : \"/heart_icon_unliked.png\"\r\n                    }\r\n                    alt=\"Like\"\r\n                    title=\"Like\"\r\n                    onClick={addLike}\r\n                    data-testid=\"likeBtn\"\r\n                />\r\n                <img\r\n                    className=\"post__icon\"\r\n                    src=\"/comment_icon.png\"\r\n                    alt=\"Comment\"\r\n                    title=\"Comment\"\r\n                    onClick={focusComment}\r\n                    data-testid=\"commentBtn\"\r\n                />\r\n                <img\r\n                    className=\"post__icon\"\r\n                    src=\"/share_icon.png\"\r\n                    alt=\"Share\"\r\n                    title=\"Share\"\r\n                    onClick={share}\r\n                />\r\n            </div>\r\n\r\n            <p className=\"post__text\" data-testid=\"postText\">\r\n                <strong>{copyright}</strong>: {explanation}\r\n            </p>\r\n            <p className=\"post__date\">{date}</p>\r\n\r\n            <div data-testid=\"postComments\">\r\n                {comments.map((comment, idx) => (\r\n                    <p key={`comment_${idx}`} className=\"post__comment\">\r\n                        <strong>{comment.email}</strong> {comment.text}\r\n                    </p>\r\n                ))}\r\n            </div>\r\n\r\n            <form className=\"post__commentBox\">\r\n                <input\r\n                    id={`input_${idx}`}\r\n                    className=\"post__input\"\r\n                    type=\"text\"\r\n                    placeholder=\"Add a comment...\"\r\n                    value={comment}\r\n                    onChange={(e) => setComment(e.target.value)}\r\n                    data-testid=\"commentInput\"\r\n                />\r\n                <button\r\n                    className=\"post__button\"\r\n                    disabled={!comment}\r\n                    type=\"submit\"\r\n                    onClick={postComment}\r\n                    data-testid=\"commentPostBtn\"\r\n                >\r\n                    Post\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Post;\r\n","import { firebase } from '@firebase/app'\r\nimport '@firebase/firestore'\r\nimport '@firebase/auth'\r\nimport '@firebase/storage'\r\n\r\nfirebase.initializeApp({\r\n  apiKey: \"AIzaSyBZk_jO9tqniRpB6AbPb5lhYeisY6-Nb74\",\r\n  authDomain: \"adamkayal-spacestagram.firebaseapp.com\",\r\n  projectId: \"adamkayal-spacestagram\",\r\n  storageBucket: \"adamkayal-spacestagram.appspot.com\",\r\n  messagingSenderId: \"859658276215\",\r\n  appId: \"1:859658276215:web:6276119e314a7d61582572\",\r\n  measurementId: \"G-DTJGBGWV2K\"\r\n});\r\n\r\nconst db = firebase.firestore();\r\nconst auth = firebase.auth();\r\nconst storage = firebase.storage();\r\n\r\nexport { db, auth, storage };\r\n","import { Button, Input, Modal } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./ModalContainer.css\";\r\nimport { validate } from 'email-validator';\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\n\r\nfunction getModalStyle() {\r\n    const top = 50;\r\n    const left = 50;\r\n\r\n    return {\r\n        top: `${top}%`,\r\n        left: `${left}%`,\r\n        transform: `translate(-${top}%, -${left}%)`,\r\n    };\r\n}\r\n\r\nfunction ModalContainer({\r\n    open,\r\n    setOpen,\r\n    onClick,\r\n    buttonText,\r\n    postUrl,\r\n    setOpenSignUp,\r\n    theme\r\n}) {\r\n    ModalContainer.propTypes = {\r\n        open: PropTypes.bool.isRequired,\r\n        setOpen: PropTypes.func.isRequired,\r\n        onClick: PropTypes.any.isRequired,\r\n        buttonText: PropTypes.string.isRequired,\r\n        postUrl: PropTypes.string,\r\n        setOpenSignUp: PropTypes.func,\r\n        theme: PropTypes.object.isRequired\r\n    };\r\n\r\n    const [modalStyle] = useState(getModalStyle);\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    return (\r\n        <Modal\r\n            open={open}\r\n            onClose={() => setOpen(false)}\r\n            aria-labelledby=\"simple-modal-title\"\r\n            aria-describedby=\"simple-modal-description\"\r\n            data-testid=\"modal\"\r\n        >\r\n            <form style={modalStyle} className=\"modalContainer__paper\">\r\n                {buttonText === \"Log In\" && (\r\n                    <div className=\"modalContainer__message\">\r\n                        Log in to like and comment on posts\r\n                    </div>\r\n                )}\r\n                <div className=\"modalContainer__signup\">\r\n                    <center>\r\n                        <img\r\n                            className=\"modalContainer__headerImage\"\r\n                            src=\"/logo.png\"\r\n                            alt=\"spacetagram logo\"\r\n                            data-testid=\"logo\"\r\n                        />\r\n                    </center>\r\n\r\n                    {buttonText === \"Copy to clipboard\" ? (\r\n                        <Input\r\n                            type=\"text\"\r\n                            value={postUrl}\r\n                            disabled\r\n                            data-testid=\"copyInput\"\r\n                        />\r\n                    ) : (\r\n                        <div className=\"modalContainer__signup\">\r\n                            <Input\r\n                                type=\"email\"\r\n                                placeholder=\"email\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                autoFocus\r\n                                error={!validate(email)}\r\n                                required\r\n                                data-testid=\"emailInput\"s\r\n                            />\r\n                            <Input\r\n                                type=\"password\"\r\n                                placeholder=\"password\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                error={password.length < 6}\r\n                                required\r\n                                data-testid=\"passwordInput\"\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    <ThemeProvider theme={theme}>\r\n                        <Button\r\n                            className=\"modalContainer__button\"\r\n                            type={\r\n                                buttonText !== \"Copy to clipboard\" ? \"submit\" : null\r\n                            }\r\n                            disabled={buttonText !== \"Copy to clipboard\" && (!validate(email) || password.length < 6)}\r\n                            onClick={(event) => onClick(event, email, password)}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                        >\r\n                            {buttonText}\r\n                        </Button>\r\n                    </ThemeProvider>\r\n\r\n                    {buttonText === \"Log In\" && (\r\n                        <div\r\n                            className=\"modalContainer__signUpOfferText\"\r\n                            data-testid=\"signUpOffer\"\r\n                        >\r\n                            Don't have an account?\r\n                            <button\r\n                                className=\"modalContainer__buttonLink\"\r\n                                onClick={() => {\r\n                                    setOpen(false);\r\n                                    setOpenSignUp(true);\r\n                                }}\r\n                            >\r\n                                Sign up\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </form>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default ModalContainer;\r\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Post from \"./components/Post/Post\";\nimport { auth } from \"./firebase/firebase\";\nimport axios from \"axios\";\nimport axiosRetry from \"axios-retry\";\nimport { Button, TextField, Tooltip } from \"@material-ui/core\";\nimport ModalContainer from \"./components/ModalContainer/ModalContainer\";\nimport Loader from \"react-loader-spinner\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport { withStyles, createTheme, ThemeProvider } from \"@material-ui/core/styles\";\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n        main: '#0095f6'\n    }\n  },\n});\n\nfunction App() {\n    const [posts, setPosts] = useState([]);\n    const [openSignUp, setOpenSignUp] = useState(false);\n    const [openLogIn, setOpenLogIn] = useState(false);\n    const [openShare, setOpenShare] = useState(false);\n    const [postUrl, setPostUrl] = useState(\"\");\n    const [user, setUser] = useState(null);\n\n    const [showLoader, setShowLoader] = useState(false);\n    const [startDate, setStartDate] = useState(\"\");\n    const [endDate, setEndDate] = useState(\"\");\n\n    // will retry the GET request up to 3 times if there is an internal server error\n    axiosRetry(axios, {\n        retries: 3,\n        retryCondition: (error) => error.response.status === 500,\n    });\n\n    // we set a listener on the user object\n    useEffect(() => {\n        const unsubscribe = auth.onAuthStateChanged((authUser) => {\n            if (authUser) {\n                setUser(authUser);\n            } else {\n                setUser(null);\n            }\n        });\n\n        return () => unsubscribe()\n    }, [user]);\n\n    // we do a search at the when the page loads\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => search(), []);\n\n    // this function fetches\n    const search = (event) => {\n        if (event) event.preventDefault();\n\n        // if dates are not correctly selected, we will choose 20 random pictures\n        let queryString = \"count=3\";\n        if (startDate) {\n            // if a correct start date is chosen, we add the start_date query string instead\n            queryString = `start_date=${startDate}`;\n            if (endDate) {\n                // if a correct end date is chosen, we also add the end_date query string\n                queryString = queryString.concat(`&end_date=${endDate}`);\n            }\n        }\n\n        setShowLoader(true);\n        axios\n            .get(\n                `https://api.nasa.gov/planetary/apod?api_key=ESNnOstvfNx2gncbFYQtbjIZDCaLKqbg5PM0Xo83&${queryString}`\n            )\n            .then((response) => {\n                setShowLoader(false);\n                setPosts(response.data);\n            })\n            .catch((error) => {\n                alert(\"API call failed after 3 retry attempts. Please try again.\");\n                console.error(error);\n                setShowLoader(false);\n            });\n    };\n\n    // function that handles the sign up\n    const signUp = (event, email, password) => {\n        event.preventDefault();\n\n        // we create the user with firebase\n        auth.createUserWithEmailAndPassword(email, password)\n            .then(() => setOpenSignUp(false))\n            .catch((error) => alert(error.message));\n    };\n\n    // function that handles the log in\n    const logIn = (event, email, password) => {\n        event.preventDefault();\n\n        // we log in the user with firebase\n        auth.signInWithEmailAndPassword(email, password)\n            .then((authUser) => {\n                authUser.user.updateProfile({\n                    displayName: email,\n                });\n                setOpenLogIn(false);\n            })\n            .catch((error) => alert(error.message));\n    };\n\n    // function that copies the post url to the clipboard\n    const copyToClipboard = (event) => {\n        event.preventDefault();\n\n        // we copy the url to the clipboard and close the modal\n        navigator.clipboard.writeText(postUrl);\n        setOpenShare(false);\n    };\n\n    // handy function to get the correct date format of today's\n    // date for the date selectors\n    const getTodayString = () => {\n        return new Date().toISOString().slice(0, 10);\n    };\n\n    const HtmlTooltip = withStyles((theme) => ({\n        tooltip: {\n            backgroundColor: \"#f5f5f9\",\n            color: \"rgba(0, 0, 0, 0.87)\",\n            maxWidth: 220,\n            fontSize: theme.typography.pxToRem(16),\n            border: \"1px solid #dadde9\",\n            textAlign: \"justify\",\n        },\n    }))(Tooltip);\n\n    return (\n        <div className=\"app\">\n            <ModalContainer\n                open={openSignUp}\n                setOpen={setOpenSignUp}\n                onClick={signUp}\n                buttonText=\"Sign Up\"\n                theme={theme}\n            />\n\n            <ModalContainer\n                open={openLogIn}\n                setOpen={setOpenLogIn}\n                onClick={logIn}\n                buttonText=\"Log In\"\n                setOpenSignUp={setOpenSignUp}\n                theme={theme}\n            />\n\n            <ModalContainer\n                open={openShare}\n                setOpen={setOpenShare}\n                onClick={copyToClipboard}\n                buttonText=\"Copy to clipboard\"\n                postUrl={postUrl}\n                theme={theme}\n            />\n\n            <div className=\"app__header\">\n                <img\n                    className=\"app__headerImage\"\n                    src=\"/logo.png\"\n                    alt=\"spacetagram logo\"\n                    data-testid=\"logo\"\n                />\n\n                {user ? (\n                    <ThemeProvider theme={theme}>\n                        <Button onClick={() => auth.signOut()} variant=\"contained\" color=\"primary\">Logout</Button>\n                    </ThemeProvider>\n                ) : (\n                    <div className=\"app__authButtons\">\n                        <ThemeProvider theme={theme}>\n                            <Button onClick={() => setOpenLogIn(true)} variant=\"contained\" color=\"primary\">\n                                Log In\n                            </Button>\n                        </ThemeProvider>\n                        <ThemeProvider theme={theme}>\n                            <Button onClick={() => setOpenSignUp(true)} variant=\"contained\" color=\"primary\">\n                                Sign Up\n                            </Button>\n                        </ThemeProvider>\n                    </div>\n                )}\n            </div>\n\n            <form className=\"app__search\" noValidate>\n                <div className=\"app__dateTitle\">\n                    <HtmlTooltip title=\"If no dates are selected, 3 random posts will be shown. If only a start date is selected, the end date will by default be today's date.\">\n                        <InfoIcon className=\"app__infoIcon\" aria-label=\"info\" />\n                    </HtmlTooltip>\n                    <p>\n                        <strong>Select dates for search (optional):</strong>\n                    </p>\n                </div>\n                <TextField\n                    id=\"start-date\"\n                    data-testid=\"startDate\"\n                    label=\"Start date\"\n                    type=\"date\"\n                    InputLabelProps={{\n                        shrink: true,\n                    }}\n                    InputProps={{\n                        inputProps: { max: getTodayString() },\n                    }}\n                    value={startDate}\n                    onChange={(event) => setStartDate(event.target.value)}\n                />\n                <TextField\n                    id=\"end-date\"\n                    data-testid=\"endDate\"\n                    label=\"End date\"\n                    type=\"date\"\n                    InputLabelProps={{\n                        shrink: true,\n                    }}\n                    InputProps={{\n                        inputProps: { min: startDate, max: getTodayString() },\n                    }}\n                    value={endDate}\n                    onChange={(event) => setEndDate(event.target.value)}\n                    disabled={!startDate}\n                />\n                <ThemeProvider theme={theme}>\n                    <Button type=\"submit\" onClick={(event) => search(event)} variant=\"contained\" color=\"primary\">\n                        Search\n                    </Button>\n                </ThemeProvider>\n            </form>\n\n            <div className=\"app__posts\">\n                <Loader\n                    type=\"Circles\"\n                    color=\"#0095f6\"\n                    height={200}\n                    width={200}\n                    visible={showLoader}\n                    className=\"app__loader\"\n                />\n\n                {!showLoader &&\n                    posts.map((post, idx) => (\n                        <Post\n                            key={idx}\n                            idx={idx}\n                            user={user}\n                            setOpenLogIn={setOpenLogIn}\n                            setOpenShare={setOpenShare}\n                            setPostUrl={setPostUrl}\n                            {...post}\n                        />\n                    ))}\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}